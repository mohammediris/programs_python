import telnetlib3
import asyncio

async def shell(reader, writer):
    mainmenu = '''
    ***********************************************************
    Main Menu
    -----------------------------------------------------------
    Save Settings
    '''
    secondMenu = '''
    ***********************************************************
    Second Menu
    -----------------------------------------------------------
    Menus:
    ***********************************************************
    '''
    mainmenuAdvanced = r'''

    ***********************************************************
    Main Menu \ Advanced
    -----------------------------------------------------------
    Menus:
    1) Video

    ***********************************************************
    '''
    videomenu = r'''

    ***********************************************************
    Main Menu \ Advanced \ Video
    -----------------------------------------------------------
    Menus:
    1) Input 1 
    2) Input 2 
    3) Input 3 
    4) Input 4 
    5) Input 5 
    6) Input 6 
    7) Input 7 
    8) Input 8 
    ***********************************************************
    '''
    inputmenu = [r'''

    ***********************************************************
    Advanced \ Video \ Input 1 
    -----------------------------------------------------------
    Menus:
    1) Encoder 1

    ***********************************************************
    ''',r'''

    ***********************************************************
    Advanced \ Video \ Input 2 
    -----------------------------------------------------------
    Menus:
    1) Encoder 1

    ***********************************************************
    ''',r'''

    ***********************************************************
    Advanced \ Video \ Input 3 
    -----------------------------------------------------------
    Menus:
    1) Encoder 1

    ***********************************************************
    ''',r'''

    ***********************************************************
    Advanced \ Video \ Input 4 
    -----------------------------------------------------------
    Menus:
    1) Encoder 1

    ***********************************************************
    ''',r'''

    ***********************************************************
    Advanced \ Video \ Input 5 
    -----------------------------------------------------------
    Menus:
    1) Encoder 1

    ***********************************************************
    ''',r'''

    ***********************************************************
    Advanced \ Video \ Input 6 
    -----------------------------------------------------------
    Menus:
    1) Encoder 1

    ***********************************************************
    ''',r'''

    ***********************************************************
    Advanced \ Video \ Input 7 
    -----------------------------------------------------------
    Menus:
    1) Encoder 1

    ***********************************************************
    ''',r'''

    ***********************************************************
    Advanced \ Video \ Input 8 
    -----------------------------------------------------------
    Menus:
    1) Encoder 1

    ***********************************************************
    '''

    ]
    encodermenu = [r'''
    ***********************************************************
    Video \ Input 1  \ Encoder 1
    -----------------------------------------------------------
    11) Remote IP Address                      : 228.1.100.101 
    12) UDP Data Port                          : 9000 
    ***********************************************************    
    ''',r'''
    ***********************************************************
    Video \ Input 2  \ Encoder 1
    -----------------------------------------------------------
    11) Remote IP Address                      : 228.1.100.102 
    12) UDP Data Port                          : 9001 
    ***********************************************************    
    ''',r'''
    ***********************************************************
    Video \ Input 3  \ Encoder 1
    -----------------------------------------------------------
    11) Remote IP Address                      : 228.1.100.103 
    12) UDP Data Port                          : 9002 
    ***********************************************************    
    ''',r'''
    ***********************************************************
    Video \ Input 4  \ Encoder 1
    -----------------------------------------------------------
    11) Remote IP Address                      : 228.1.100.104 
    12) UDP Data Port                          : 9003 
    ***********************************************************    
    ''',r'''
    ***********************************************************
    Video \ Input 5  \ Encoder 1
    -----------------------------------------------------------
    11) Remote IP Address                      : 228.1.100.105 
    12) UDP Data Port                          : 9004 
    ***********************************************************    
    ''',r'''
    ***********************************************************
    Video \ Input 6  \ Encoder 1
    -----------------------------------------------------------
    11) Remote IP Address                      : 228.1.100.106 
    12) UDP Data Port                          : 9005 
    ***********************************************************    
    ''',r'''
    ***********************************************************
    Video \ Input 7  \ Encoder 1
    -----------------------------------------------------------
    11) Remote IP Address                      : 228.1.100.107 
    12) UDP Data Port                          : 9006 
    ***********************************************************    
    ''',r'''
    ***********************************************************
    Video \ Input 8  \ Encoder 1
    -----------------------------------------------------------
    11) Remote IP Address                      : 228.1.100.108 
    12) UDP Data Port                          : 9007 
    ***********************************************************    
    '''
    ]
    writer.write(mainmenu)

    while True:
        line = await reader.readline()
        print (line)
        if line == '6\n':
            writer.write(secondMenu)
            line = await reader.readline()
            print (line)
            if line == '6\n':
                writer.write(mainmenuAdvanced)
                line = await reader.readline()
                print (line)
                if line == '1\n':
                    writer.write(videomenu)
                    line = await reader.readline()
                    print (line)
                    if line == '1\n':
                        writer.write(inputmenu[0])
                        line = await reader.readline()
                        print (line)
                        if line == '1\n':
                            writer.write(encodermenu[0])
                            line = await reader.readline()
                            print (line)
                    elif line == '2\n':
                        writer.write(inputmenu[1])
                        line = await reader.readline()
                        print (line)
                        if line == '1\n':
                            writer.write(encodermenu[1])
                            line = await reader.readline()
                            print (line)
        else:
            writer.write("wrong input")
       
            
        if not line:
            break
                  
    writer.close() 
    

async def main():
    server = await telnetlib3.create_server(host='localhost', port=8023, shell=shell)

    # Run the server until it's closed manually or by an exception
    async with server:
        await server.serve_forever()

# Use asyncio.run to handle the event loop creation
asyncio.run(main())
